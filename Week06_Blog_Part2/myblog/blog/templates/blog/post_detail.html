{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

    <!-- Post Header -->
    <div class="card p-4 mb-4">
        <h2 class="fw-bold">{{ post.title }}</h2>
        <p class="mt-3">{{ post.content }}</p>

        <div class="text-muted small mt-2">
            <i class="bi bi-person"></i> {{ post.user.username }}  
            â€¢  
            <i class="bi bi-calendar"></i> {{ post.created_at|date:"M d, Y g:i A" }}
        </div>
    </div>

    <hr>

    <!-- âœ… Comment Section -->
    <h4 class="fw-bold mb-3">Comments</h4>

    {% for c in comments %}
        <div class="card p-3 mb-2">
            <strong>{{ c.user.username }}</strong>
            <p class="mt-2 mb-1">{{ c.content }}</p>
            <small class="text-muted">{{ c.created_at|date:"M d, Y g:i A" }}</small>
        </div>
    {% empty %}
        <p>No comments yet. Be the first to drop one ðŸ˜Ž</p>
    {% endfor %}

    <hr class="my-4">

    <!-- âœ… Add Comment Form -->
    <h5>Add a Comment</h5>

    {% if user.is_authenticated %}
    <form method="POST" class="mt-2">
        {% csrf_token %}
        <textarea 
            name="content"
            class="form-control"
            rows="3"
            placeholder="Write your comment..."
            required></textarea>

        <button class="btn btn-primary mt-2">Post Comment</button>
    </form>

    {% else %}
        <p class="text-muted">You must <a href="{% url 'login' %}">login</a> to comment.</p>
    {% endif %}

</div>
{% endblock %}
